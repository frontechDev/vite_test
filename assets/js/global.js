import{F as p}from"./fingerprint.js";import{c as g}from"./config.js";class y{constructor(){this.elemWidth=0,this.fitCount=0,this.varWidth=0,this.ctr=0,this.$menu=document.querySelector(".header-menu__list"),this.$collectedSet=null,this.$button=document.querySelector(".header-menu__button"),this.parent=document.querySelector(".header-menu"),this.parent.classList.add("is-loaded"),window.innerWidth>=992&&this.initialize()}initialize(){this.ctr=this.$menu.children.length;for(let e=0;e<this.$menu.children.length;e++)this.varWidth+=this.$menu.children[e].offsetWidth;window.innerWidth>=992?(this.collect(),this.parent.classList.add("is-loaded")):this.parent.classList.remove("is-loaded"),window.innerWidth>=992&&(window.addEventListener("resize",this.collect.bind(this)),this.$button.addEventListener("click",this.toggleMenuClass.bind(this)),document.addEventListener("click",this.handleOutsideClick.bind(this)))}collect(){if(window.innerWidth>=992){window.innerWidth<=900?(this.elemWidth=this.$menu.offsetWidth-80,this.fitCount=Math.floor(this.elemWidth/this.varWidth*this.ctr)-1):(this.elemWidth=this.$menu.offsetWidth-250,this.fitCount=Math.floor(this.elemWidth/this.varWidth*this.ctr)-1);for(let t=0;t<this.$menu.children.length;t++){const i=this.$menu.children[t];i.style.display="flex",i.style.width="auto"}const e=[];for(let t=this.fitCount+1;t<this.$menu.children.length;t++){const i=this.$menu.children[t];if(i){const n=document.createElement(i.tagName);n.innerHTML=i.innerHTML,n.className=i.className,n.style.cssText=i.style.cssText,e.push(n)}}const s=document.querySelector(".header-menu__dropdown");s.innerHTML="",e.forEach(t=>{s.appendChild(t)});for(let t=this.fitCount+1;t<this.$menu.children.length;t++){const i=this.$menu.children[t];i&&(i.style.display="none",i.style.width="0")}e.length>0?this.$button.style.display="flex":(this.$button.style.display="none",this.parent.classList.remove("active"))}}toggleMenuClass(){this.parent.classList.toggle("active")}handleOutsideClick(e){this.parent.contains(e.target)||this.parent.classList.remove("active")}}window.innerWidth>992&&new y;class v{constructor(){this.buttons=document.querySelectorAll(".js-toggle-menu"),this.body=document.body,this.header=document.querySelector("header"),this.headerBottom=document.querySelector(".header__bottom"),this.headerProfile=document.querySelector(".header__profile"),this.headerTheme=document.querySelector(".header .theme-switcher"),this.headerBtn=document.querySelector(".header__button.button-outline-gray"),this.handleWindowResize=this.handleWindowResize.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.addClickHandlers(),this.cloneHeaderElements(),this.handleWindowResize(),window.addEventListener("resize",this.handleWindowResize)}cloneHeaderElements(){this.headerProfileClone=this.headerProfile.cloneNode(!0),this.headerThemeClone=this.headerTheme.cloneNode(!0),this.headerBtn&&(this.headerBtnClone=this.headerBtn.cloneNode(!0))}toggleMenu(){this.body.classList.toggle("is-menu"),this.header.classList.toggle("is-menu"),document.querySelector(".js-toggle-menu").classList.toggle("is-active"),this.body.classList.remove("is-search"),document.querySelector(".header__search").classList.remove("is-visible"),this.body.classList.contains("is-menu")?(this.headerBottom.insertBefore(this.headerProfileClone,this.headerBottom.firstChild),this.headerBottom.insertBefore(this.headerThemeClone,this.headerBottom.firstChild),this.headerBtn&&this.headerBottom.insertBefore(this.headerBtnClone,this.headerBottom.firstChild)):(document.querySelector(".header__bottom .header__profile").classList.remove("active"),this.headerBottom.removeChild(this.headerProfileClone),this.headerBottom.removeChild(this.headerThemeClone),this.headerBtn&&this.headerBottom.removeChild(this.headerBtnClone))}handleWindowResize(){window.innerWidth>992&&(this.body.classList.remove("is-menu"),this.header.classList.remove("is-menu"),document.querySelector(".js-toggle-menu").classList.remove("is-active"),this.header.insertAdjacentElement("afterend",this.headerBottom))}addClickHandlers(){this.buttons.forEach(e=>{e.addEventListener("click",this.toggleMenu)})}}new v;class L{constructor(e,s,t){this.header=document.querySelector(e),this.headerBottom=document.querySelector(s),this.footer=document.querySelector(t),this.bindEvents(),this.checkScrollPosition()}bindEvents(){window.addEventListener("scroll",this.checkScrollPosition.bind(this)),window.addEventListener("resize",this.checkScrollPosition.bind(this))}checkScrollPosition(){const e=this.footer.getBoundingClientRect(),s=this.headerBottom.offsetHeight,t=e.top-s<=0,i=window.scrollY>this.header.offsetHeight;t?this.headerBottom.classList.add("is-hidden"):this.headerBottom.classList.remove("is-hidden"),i?this.headerBottom.classList.add("is-sticky"):this.headerBottom.classList.remove("is-sticky")}}new L("header",".header__bottom","footer");class b{constructor(){this.lists=document.querySelectorAll(".footer-menu__list"),this.windowWidth=window.innerWidth,this.toggleAccordion=this.toggleAccordion.bind(this),this.addEventListeners(),this.toggleOnLoad()}addEventListeners(){window.addEventListener("resize",()=>{const e=window.innerWidth;this.windowWidth<=767&&e>767?this.lists.forEach(s=>{s.querySelector(".footer-menu__item:first-child").removeEventListener("click",this.toggleAccordion)}):this.windowWidth>767&&e<=767&&this.lists.forEach(s=>{s.querySelector(".footer-menu__item:first-child").addEventListener("click",this.toggleAccordion)}),this.windowWidth=e})}toggleOnLoad(){this.windowWidth<=767&&this.lists.forEach(e=>{e.querySelector(".footer-menu__item:first-child").addEventListener("click",this.toggleAccordion)})}toggleAccordion(e){this.windowWidth<=767&&e&&(e.preventDefault(),e.currentTarget.closest(".footer-menu__list").classList.toggle("active"))}}new b;class _{constructor(){this.lists=document.getElementsByClassName("footer-menu__list"),this.init()}init(){for(let e=0;e<this.lists.length;e++){const s=this.lists[e],t=s.getElementsByClassName("footer-menu__item");if(t.length>5){for(let n=5;n<t.length;n++)t[n].classList.add("hidden-item");const i=document.createElement("li");i.innerHTML="...",i.classList.add("footer-menu__item","footer-menu__show-more"),s.appendChild(i),i.addEventListener("click",()=>{s.getElementsByClassName("hidden-item"),s.classList.toggle("show-items"),i.classList.toggle("active"),i.innerHTML,i.innerHTML="..."})}}}}new _;class C{init(e){e.bind(this)()}setCampaignScript(e,s){function t(r){return function(){this._.push([r,arguments])}}function i(r){var l=s.createElement("script");l.type="text/javascript",l.async=!0,l.src=r,s.getElementsByTagName("head")[0].appendChild(l)}e.remplib=e.remplib||{};var n={campaign:"init",tracker:"init trackEvent trackPageview trackCommerce",iota:"init"};Object.keys(n).forEach(function(r){if(!e.remplib[r]){var l,h,a=n[r].split(" ");for(e.remplib[r]={_:[]},h=0;h<a.length;h++)l=a[h],e.remplib[r][l]=t(l)}}),i(`${cdn}/assets/js/campaign.js`),i(`${cdn}/assets/js/remplib.js`)}setCampaignConfig(e,s){let t={token:e.token,userId:e.userId,userSubscribed:e.userSubscribed,campaign:{url:e.campaign.url,variables:{email:{value:function(){return""}}}},tracker:{url:e.tracker.url}};return e.article&&(t.article={id:e.article.id+"_"+s,author_id:e.article.author_id,category:e.article.category,locked:!1,contentType:e.article.contentType,tags:e.article.tags,elementFn:function(){return document.getElementsByClassName("article__container")}},t.tracker.timeSpent={enabled:!0}),t}}window.onload=()=>new p;const E=document.documentElement.getAttribute("lang"),m=E||"uk",d=new C;d.setCampaignScript(window,document);let c=null,u=m==="uk"?"ua":m,f=!1;document.addEventListener("articleViewed",function(o){c=o.detail.articleId,f&&w(g.clientToken)});function w(o){d.init(async()=>{console.log("articleId",c);let e=c?`?article_id=${c}&lang=${u}`:"";console.log("urlQuery",e);const t=await(await fetch(`${current_domain}/crm/campaign-data/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}})).json(),i=d.setCampaignConfig(t,u);remplib.campaign.init(i),remplib.tracker.init(i)})}setTimeout(()=>{w(g.clientToken),f=!0},500);console.log("global js3");
